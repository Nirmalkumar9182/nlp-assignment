You	PRP
could	MD
use	VB
an	DT
Observer	NNP
pattern	NN
.	.
A	DT
simple	JJ
functional	JJ
way	NN
		
to	TO
accomplish	VB
this	DT
:	:
<	NN
?php	NNP
/	NNP
*	NNP
*	NNP
Plugin	NNP
system	NN
		
*	NNP
*	NNP
/	NNP
$listeners	NNS
=	VBP
array	NN
(	(
)	)
;	:
/	CC
*	VB
		
Create	NNP
an	DT
entry	NN
point	NN
for	IN
plugins	NNS
*	JJ
/function	NN
hook	NN
(	(
)	)
		
{	(
global	JJ
$listeners	NNS
;	:
$num_args	NNP
=	NNP
func_num_args	NNP
(	(
)	)
;	:
$args	CC
		
=	VB
func_get_args	NN
(	(
)	)
;	:
if	IN
(	(
$num_args	JJ
<	NNP
2	CD
)	)
		
trigger_error	NN
(	(
"Insufficient	JJ
arguments	NNS
"	VBP
,	,
E_USER_ERROR	NNP
)	)
;	:
/	CC
/	VB
		
Hook	NNP
name	NN
should	MD
always	RB
be	VB
first	JJ
argument	NN
$hook_name	NN
=	NNP
array_shift	NN
(	(
		
$args	NNP
)	)
;	:
if	IN
(	(
!isset	FW
(	(
$listeners	NNS
[	VBP
$hook_name	JJ
]	NNP
		
)	)
)	)
return	NN
;	:
/	CC
/	VB
No	DT
plugins	NNS
have	VBP
registered	VBN
this	DT
		
hook	NN
foreach	NN
(	(
$listeners	NNS
[	VBP
$hook_name	JJ
]	NNP
as	IN
$func	NNP
)	)
{	(
		
$args	JJ
=	NN
$func	NNP
(	(
$args	NNP
)	)
;	:
}	)
return	VBP
$args	NNS
;	:
		
}	)
/	FW
*	FW
Attach	VBP
a	DT
function	NN
to	TO
a	DT
hook	NN
*	JJ
/function	NN
		
add_listener	NN
(	(
$hook	UH
,	,
$function_name	NN
)	)
{	(
global	JJ
$listeners	NNS
;	:
$listeners	NNS
		
[	VBP
$hook	NNP
]	NNP
[	NNP
]	NNP
=	NNP
$function_name	NN
;	:
}	)
/	FW
/	JJ
		
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
		
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
		
/	NNP
/	NNP
*	NNP
*	NNP
Sample	NNP
Plugin	NNP
*	NNP
*	NNP
/add_listener	NNP
(	(
'	''
		
a_b	NN
'	''
,	,
'	''
my_plugin_func1	NNP
'	POS
)	)
;add_listener	NN
(	(
'	''
str	NN
		
'	''
,	,
'	''
my_plugin_func2	NNP
'	POS
)	)
;function	NN
my_plugin_func1	NN
(	(
$args	NNP
)	)
		
{	(
return	NN
array	NN
(	(
4	CD
,	,
5	CD
)	)
;	:
}function	NN
my_plugin_func2	NN
		
(	(
$args	NNP
)	)
{	(
return	NN
str_replace	NN
(	(
'	''
sample	NN
'	''
,	,
		
'	''
CRAZY	NNP
'	POS
,	,
$args	FW
[0	NNP
]	NNP
)	)
;	:
}	)
/	FW
		
/	JJ
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
		
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
/	NNP
		
/	NNP
/	NNP
/	NNP
*	NNP
*	NNP
Sample	NNP
Application	NNP
*	NNP
*	NNP
/	NNP
$a	NNP
		
=	NNP
1	CD
;	:
$b	NNP
=	VBD
2	CD
;list	NN
(	(
$a	UH
,	,
$b	NNP
		
)	)
=	VBP
hook	NN
(	(
'	''
a_b	NN
'	''
,	,
$a	NNP
,	,
$b	NNP
		
)	)
;	:
$str	CC
=	VB
"This	NN
is	VBZ
my	PRP$
sample	JJ
application	NN
\n	NNP
"	NNP
		
;	:
$str	NNP
.	.
=	VB
"	JJ
$a	NNP
+	NNP
$b	NNP
=	NNP
"	NNP
.(	NNP
		
$a	NNP
+	NNP
$b	NNP
)	)
.	.
"	JJ
\n	JJ
"	NN
;	:
$str	NNP
.	.
		
=	VB
"	JJ
$a	NNP
*	NNP
$b	NNP
=	NNP
"	NNP
.(	NNP
$a	NNP
*	NNP
$b	NNP
		
)	)
.	.
"	JJ
\n	JJ
"	NN
;	:
$str	CC
=	VB
hook	NN
(	(
'	''
		
str	NN
'	''
,	,
$str	NNP
)	)
;echo	VBP
$str	NN
;	:
?	.
>	FW
Output	NN
		
:	:
This	DT
is	VBZ
my	PRP$
CRAZY	JJ
application4	NN
+	VBD
5	CD
=	JJ
94	CD
*	JJ
		
5	CD
=	JJ
20	CD
Notes	NNS
:	:
For	IN
this	DT
example	NN
source	NN
code	NN
,	,
		
you	PRP
must	MD
declare	VB
all	DT
your	PRP$
plugins	NNS
before	IN
the	DT
actual	JJ
source	NN
code	NN
		
that	IN
you	PRP
want	VBP
to	TO
be	VB
extendable	JJ
.	.
I've	NNP
included	VBD
an	DT
example	NN
		
of	IN
how	WRB
to	TO
handle	VB
single	JJ
or	CC
multiple	JJ
values	NNS
being	VBG
passed	VBN
to	TO
		
the	DT
plugin	NN
.	.
The	DT
hardest	JJS
part	NN
of	IN
this	DT
is	VBZ
writing	VBG
the	DT
		
actual	JJ
documentation	NN
which	WDT
lists	VBZ
what	WP
arguments	VBZ
get	VB
passed	VBN
to	TO
each	DT
hook	NN
		
.	.
This	DT
is	VBZ
just	RB
one	CD
method	NN
of	IN
accomplishing	VBG
a	DT
plugin	NN
system	NN
		
in	IN
PHP	NNP
.	.
There	EX
are	VBP
better	JJR
alternatives	NNS
,	,
I	PRP
suggest	VBP
you	PRP
		
check	VB
out	RP
the	DT
WordPress	NNP
Documentation	NNP
for	IN
more	JJR
information	NN
.	.
Sorry	NNP
,	,
		
it	PRP
appears	VBZ
underscore	JJ
characters	NNS
are	VBP
replaced	VBN
by	IN
HTML	NNP
entities	NNS
by	IN
Markdown	NNP
		
?	.
I	PRP
can	MD
re-post	VB
this	DT
code	NN
when	WRB
this	DT
bug	NN
gets	VBZ
fixed	VBN
		
.	.
Edit	NN
:	:
Nevermind	NN
,	,
it	PRP
only	RB
appears	VBZ
that	IN
way	NN
when	WRB
		
you	PRP
are	VBP
editing	VBG
I've	NNP
written	VBN
a	DT
database	NN
generation	NN
script	NN
in	IN
SQL	NNP
		
and	CC
want	VBP
to	TO
execute	VB
it	PRP
in	IN
my	PRP$
Adobe	NNP
AIR	NNP
application	NN
:	:
		
Create	NNP
Table	NNP
tRole	NN
(	(
roleID	JJ
integer	NN
Primary	NNP
Key	NNP
,roleName	NNP
varchar	NNP
(	(
		
40	CD
)	)
)	)
;	:
Create	NNP
Table	NNP
tFile	NN
(	(
fileID	JJ
integer	NN
Primary	NNP
		
Key	NNP
,fileName	NNP
varchar	NNP
(	(
50	CD
)	)
,fileDescription	NN
varchar	NN
(	(
500	CD
)	)
		
,thumbnailID	NN
integer	NN
,fileFormatID	NNP
integer	NN
,categoryID	NNP
integer	NN
,isFavorite	JJ
boolean	NN
,dateAdded	VBD
date	NN
,globalAccessCount	NN
		
integer	NN
,lastAccessTime	NN
date	NN
,downloadComplete	JJ
boolean	JJ
,isNew	JJ
boolean	NN
,isSpotlight	VBD
boolean	JJ
,duration	NN
varchar	NN
		
(	(
30	CD
)	)
)	)
;	:
Create	NNP
Table	NNP
tCategory	NN
(	(
categoryID	JJ
integer	NN
		
Primary	NNP
Key	NNP
,categoryName	NNP
varchar	NNP
(	(
50	CD
)	)
,parent_categoryID	FW
integer	NN
)	)
;	:
		
...	:
I	PRP
execute	VBP
this	DT
in	IN
Adobe	NNP
AIR	NNP
using	VBG
the	DT
following	JJ
methods	NNS
		
:	:
public	JJ
static	JJ
function	NN
RunSqlFromFile	NNP
(	(
fileName	JJ
:String	VBG
)	)
:void	FW
{	(
		
var	NN
file	NN
:File	JJ
=	NN
File	NNP
.	.
applicationDirectory	NN
.	.
resolvePath	NN
(	(
fileName	NN
		
)	)
;	:
var	JJ
stream	NN
:FileStream	NN
=	NNP
new	JJ
FileStream	NNP
(	(
)	)
;	:
		
stream	NN
.	.
open	JJ
(	(
file	NN
,	,
FileMode	NNP
.	.
READ	NNP
)	)
var	FW
		
strSql	JJ
:String	VBG
=	JJ
stream	NN
.	.
readUTFBytes	NNS
(	(
stream	NN
.	.
bytesAvailable	JJ
)	)
		
;	:
NonQuery	NNP
(	(
strSql	NN
)	)
;	:
}	)
public	JJ
static	JJ
function	NN
NonQuery	NNP
		
(	(
strSQL	JJ
:String	VBG
)	)
:void	FW
{	(
var	JJ
sqlConnection	NN
:SQLConnection	NN
=	NNP
new	JJ
		
SQLConnection	NNP
(	(
)	)
;	:
sqlConnection	NN
.	.
open	JJ
(	(
File	NNP
.	.
applicationStorageDirectory	NN
		
.	.
resolvePath	NN
(	(
DBPATH	NNP
)	)
;	:
var	FW
sqlStatement	JJ
:SQLStatement	NN
=	NNP
new	JJ
		
SQLStatement	NNP
(	(
)	)
;	:
sqlStatement	NN
.	.
text	JJ
=	JJ
strSQL	NN
;	:
sqlStatement	NN
		
.	.
sqlConnection	NN
=	JJ
sqlConnection	NN
;	:
try	VB
{	(
sqlStatement	NN
.	.
execute	NN
(	(
		
)	)
;	:
}	)
catch	NN
(	(
error	JJ
:SQLError	NN
)	)
{	(
Alert	NNP
.	.
		
show	NN
(	(
error	NN
.	.
toString	NN
(	(
)	)
)	)
;	:
}	)
}	)
		
No	DT
errors	NNS
are	VBP
generated	VBN
,	,
however	RB
only	RB
tRole	JJ
exists	NNS
.	.
It	PRP
		
seems	VBZ
that	IN
it	PRP
only	RB
looks	VBZ
at	IN
the	DT
first	JJ
query	NN
(	(
up	IN
		
to	TO
the	DT
semicolon	NN
-	:
if	IN
I	PRP
remove	VBP
it	PRP
,	,
the	DT
query	NN
		
fails	VBZ
)	)
.	.
Is	VBZ
there	EX
a	DT
way	NN
to	TO
call	VB
multiple	JJ
queries	NNS
		
in	IN
one	CD
statement	NN
?	.
One	CD
framework	NN
I'm	NNP
considering	VBG
would	MD
be	VB
for	IN
		
a	DT
blogging	NN
platform	NN
.	.
Since	IN
just	RB
about	IN
any	DT
possible	JJ
view	NN
of	IN
		
data	NNS
you	PRP
would	MD
want	VB
would	MD
be	VB
sorted	VBN
by	IN
date	NN
,	,
I	PRP
		
was	VBD
thinking	VBG
about	IN
this	DT
structure	NN
:	:
One	CD
directory	NN
per	IN
content	NN
node	NN
		
:	:
.	.
/content	JJ
/YYYYMMDDHHMMSS	JJ
/	NNP
Subdirectories	NNP
of	IN
each	DT
node	NN
including	VBG
/tags	JJ
		
/authors	NNS
/comments	NNS
As	RB
well	RB
as	IN
simple	JJ
text	NN
files	NNS
in	IN
the	DT
node	JJ
		
directory	NN
for	IN
pre	JJ
-	:
and	CC
post-rendered	JJ
content	NN
and	CC
the	DT
like	JJ
.	.
		
This	DT
would	MD
allow	VB
a	DT
simple	JJ
PHP	NNP
glob	NN
(	(
)	)
call	NN
(	(
		
and	CC
probably	RB
a	DT
reversal	NN
of	IN
the	DT
result	NN
array	NN
)	)
to	TO
query	VB
		
on	IN
just	RB
about	IN
anything	NN
within	IN
the	DT
content	JJ
structure	NN
:	:
glob	NN
(	(
		
"content	JJ
/	NNP
*	NNP
/tags	NNP
/funny	NNP
"	NNP
)	)
;	:
Would	MD
return	VB
paths	NNS
		
including	VBG
all	DT
articles	NNS
tagged	VBN
"funny	JJ
"	NN
.	.
So	IN
I	PRP
find	VBP
myself	PRP
		
porting	VBG
a	DT
game	NN
,	,
that	WDT
was	VBD
originally	RB
written	VBN
for	IN
the	DT
Win32	NNP
		
API	NNP
,	,
to	TO
Linux	NNP
(	(
well	RB
,	,
porting	VBG
the	DT
OS	NNP
X	NNP
		
port	NN
of	IN
the	DT
Win32	NNP
port	NN
to	TO
Linux	NNP
)	)
.	.
I	PRP
have	VBP
		
implemented	VBN
QueryPerformanceCounter	NNP
by	IN
giving	VBG
the	DT
uSeconds	NNS
since	IN
the	DT
process	NN
start	VB
up	IN
		
:	:
BOOL	NNP
QueryPerformanceCounter	NNP
(	(
LARGE_INTEGER	NNP
*	NNP
performanceCount	NN
)	)
{	(
gettimeofday	NN
(	(
		
¤tTimeVal	UH
,	,
NULL	NNP
)	)
;	:
performanceCount	CC
-	:
>QuadPart	NN
=	NN
(	(
currentTimeVal	NN
		
.	.
tv_sec	SYM
-	:
startTimeVal	NN
.	.
tv_sec	NN
)	)
;	:
performanceCount	CC
-	:
>QuadPart	NN
		
*	NN
=	NNP
(	(
1000	CD
*	IN
1000	CD
)	)
;	:
performanceCount	CC
-	:
>QuadPart	NN
		
+	NN
=	NNP
(	(
currentTimeVal	NN
.	.
tv_usec	SYM
-	:
startTimeVal	NN
.	.
tv_usec	NN
)	)
		
;	:
return	VB
true	JJ
;	:
}	)
This	DT
,	,
coupled	VBN
with	IN
QueryPerformanceFrequency	NNP
(	(
		
)	)
giving	VBG
a	DT
constant	JJ
1000000	CD
as	IN
the	DT
frequency	NN
,	,
works	VBZ
well	RB
		
on	IN
my	PRP$
machine	NN
,	,
giving	VBG
me	PRP
a	DT
64	CD
bit	NN
variable	JJ
that	IN
		
contains	VBZ
uSeconds	NNS
since	IN
the	DT
program's	NNS
start	VBP
up	RP
.	.
So	RB
is	VBZ
this	DT
		
portable	JJ
?	.
I	PRP
don't	VBP
want	VB
to	TO
discover	VB
it	PRP
works	VBZ
differently	RB
if	IN
		
the	DT
kernel	NN
was	VBD
compiled	VBN
in	IN
a	DT
certain	JJ
way	NN
or	CC
anything	NN
like	IN
		
that	DT
.	.
I	PRP
am	VBP
fine	JJ
with	IN
it	PRP
being	VBG
non-portable	JJ
to	TO
something	NN
		
other	JJ
than	IN
Linux	NNP
,	,
however	RB
.	.
One	CD
way	NN
to	TO
store	VB
flat-file	JJ
		
content	NN
would	MD
be	VB
to	TO
save	VB
literal	JJ
arrays	NNS
to	TO
php	VB
files	NNS
.	.
		
For	IN
example	NN
:	:
$data	NN
=	NN
array	NN
(	(
)	)
;	:
if	IN
(	(
		
$_POST	NN
)	)
{	(
$data	JJ
=	NN
$_POST	NN
;	:
$content	JJ
=	NNP
"	NNP
<	NNP
		
?php	NNP
\n	NNP
"	NNP
;	:
$content	NN
.	.
=	NN
'	''
$data	JJ
=	NNP
'	POS
		
.	.
var_export	NN
(	(
$data	UH
,	,
true	JJ
)	)
.	.
"	JJ
\n	JJ
"	NN
		
;	:
$content	NN
.	.
=	VB
"	NN
?	.
>	JJ
"	NN
;	:
save_to_file	NN
(	(
		
$filename	JJ
,	,
$content	JJ
)	)
;	:
}	)
/	FW
/	JJ
echo	JJ
form	NN
Maybe	NNP
		
.	.
But	CC
you	PRP
have	VBP
bigger	JJR
problems	NNS
.	.
gettimeofday	NN
(	(
)	)
can	MD
		
result	VB
in	IN
incorrect	JJ
timings	NNS
if	IN
there	EX
are	VBP
processes	NNS
on	IN
your	PRP$
system	NN
		
that	WDT
change	VBP
the	DT
timer	NN
(	(
ie	JJ
,	,
ntpd	RB
)	)
.	.
On	IN
		
a	DT
"normal	JJ
"	NN
linux	NN
,	,
though	IN
,	,
I	PRP
believe	VBP
the	DT
resolution	NN
		
of	IN
gettimeofday	NN
(	(
)	)
is	VBZ
10us	CD
.	.
It	PRP
can	MD
jump	VB
forward	RB
		
and	CC
backward	RB
and	CC
time	NN
,	,
consequently	RB
,	,
based	VBN
on	IN
the	DT
processes	NNS
		
running	VBG
on	IN
your	PRP$
system	NN
.	.
This	DT
effectively	RB
makes	VBZ
the	DT
answer	NN
to	TO
		
your	PRP$
question	NN
no	DT
.	.
You	PRP
should	MD
look	VB
into	IN
clock_gettime	NN
(	(
CLOCK_MONOTONIC	NNP
		
)	)
for	IN
timing	VBG
intervals	NNS
.	.
It	PRP
suffers	VBZ
from	IN
several	JJ
less	JJR
issues	NNS
		
due	JJ
to	TO
things	NNS
like	IN
multi-core	JJ
systems	NNS
and	CC
external	JJ
clock	NN
settings	NNS
.	.
		
Also	RB
,	,
look	VB
into	IN
the	DT
clock_getres	NNS
(	(
)	)
function	NN
.	.
The	DT
		
actual	JJ
resolution	NN
of	IN
gettimeofday	NN
(	(
)	)
depends	VBZ
on	IN
the	DT
hardware	NN
architecture	NN
		
.	.
Intel	NNP
processors	NNS
as	RB
well	RB
as	IN
SPARC	NNP
machines	NNS
offer	VBP
high	JJ
resolution	NN
		
timers	NNS
that	WDT
measure	NN
microseconds	VBZ
.	.
Other	JJ
hardware	NN
architectures	VBZ
fall	VBP
back	RB
to	TO
		
the	DT
system	NN
’s	JJ
timer	NN
,	,
which	WDT
is	VBZ
typically	RB
set	VBN
to	TO
100	CD
		
Hz	NNP
.	.
In	IN
such	JJ
cases	NNS
,	,
the	DT
time	NN
resolution	NN
will	MD
be	VB
		
less	JJR
accurate	JJ
.	.
I	PRP
obtained	VBD
this	DT
answer	NN
from	IN
High	NNP
Resolution	NNP
Time	NNP
		
Measurement	NNP
and	CC
Timers	NNP
,	,
Part	NNP
I	PRP
That's	NNP
true	JJ
.	.
serialize	VB
(	(
		
)	)
can	MD
be	VB
pretty	RB
useful	JJ
for	IN
that	DT
as	RB
well	RB
.	.
I	PRP
		
think	VBP
the	DT
trick	NN
to	TO
coming	VBG
up	RP
with	IN
a	DT
viable	JJ
system	NN
is	VBZ
		
finding	VBG
some	DT
way	NN
to	TO
index	NN
the	DT
data	NN
nodes	NNS
without	IN
killing	VBG
yourself	PRP
		
with	IN
complexity	NN
.	.
Recently	RB
our	PRP$
site	NN
has	VBZ
been	VBN
deluged	VBN
with	IN
the	DT
		
resurgence	NN
of	IN
the	DT
Asprox	NNP
botnet	NN
SQL	NNP
injection	NN
attack	NN
.	.
Without	IN
going	VBG
		
into	IN
details	NNS
,	,
the	DT
attack	NN
attempts	VBZ
to	TO
execute	VB
SQL	NNP
code	NN
by	IN
		
encoding	VBG
the	DT
T-SQL	NNP
commands	NNS
in	IN
an	DT
ASCII	NNP
encoded	VBD
BINARY	NNP
string	NN
.	.
		
It	PRP
looks	VBZ
something	NN
like	IN
this	DT
:	:
DECLARE	NNP
%20	NNP
@S	NNP
%20NVARCHAR	NNP
(	(
		
4000	CD
)	)
;SET	FW
%20	FW
@S	FW
=CAST	NN
(	(
0x44004500	CD
...	:
06F007200	CD
%20AS	JJ
		
%20NVARCHAR	NN
(	(
4000	CD
)	)
)	)
;EXEC	FW
(	(
@S	NNP
)	)
;	:
--	:
		
I	PRP
was	VBD
able	JJ
to	TO
decode	VB
this	DT
in	IN
SQL	NNP
,	,
but	CC
I	PRP
		
was	VBD
a	DT
little	JJ
wary	NN
of	IN
doing	VBG
this	DT
since	IN
I	PRP
didn't	VBP
know	VB
		
exactly	RB
what	WP
was	VBD
happening	VBG
at	IN
the	DT
time	NN
.	.
I	PRP
tried	VBD
to	TO
		
write	VB
a	DT
simple	JJ
decode	NN
tool	NN
,	,
so	IN
I	PRP
could	MD
decode	VB
this	DT
		
type	NN
of	IN
text	NN
without	IN
even	RB
touching	VBG
SQL	NNP
Server	NNP
.	.
The	DT
main	JJ
		
part	NN
I	PRP
need	VBP
decoded	VBN
is	VBZ
:	:
CAST	NNP
(	(
0x44004500	CD
...	:
06F007200	CD
		
AS	IN
NVARCHAR	NNP
(	(
4000	CD
)	)
)	)
I've	NNP
tried	VBD
all	DT
of	IN
the	DT
		
following	JJ
commands	NNS
with	IN
no	DT
luck	NN
:	:
txtDecodedText	NN
.	.
Text	NNP
=	NN
System	NNP
		
.	.
Web	NNP
.	.
HttpUtility	NNP
.	.
UrlDecode	NNP
(	(
txtURLText	JJ
.	.
Text	NNP
)	)
		
;	:
txtDecodedText	NN
.	.
Text	NNP
=	JJ
Encoding	NNP
.	.
ASCII	NNP
.	.
GetString	NNP
(	(
		
Encoding	NNP
.	.
ASCII	NNP
.	.
GetBytes	NNP
(	(
txtURLText	JJ
.	.
Text	NNP
)	)
)	)
		
;	:
txtDecodedText	NN
.	.
Text	NNP
=	JJ
Encoding	NNP
.	.
Unicode	NNP
.	.
GetString	NNP
(	(
		
Encoding	NNP
.	.
Unicode	NNP
.	.
GetBytes	NNP
(	(
txtURLText	JJ
.	.
Text	NNP
)	)
)	)
		
;	:
txtDecodedText	NN
.	.
Text	NNP
=	JJ
Encoding	NNP
.	.
ASCII	NNP
.	.
GetString	NNP
(	(
		
Encoding	NNP
.	.
Unicode	NNP
.	.
GetBytes	NNP
(	(
txtURLText	JJ
.	.
Text	NNP
)	)
)	)
		
;	:
txtDecodedText	NN
.	.
Text	NNP
=	JJ
Encoding	NNP
.	.
Unicode	NNP
.	.
GetString	NNP
(	(
		
Convert	NNP
.	.
FromBase64String	NNP
(	(
txtURLText	JJ
.	.
Text	NNP
)	)
)	)
;	:
What	WP
		
is	VBZ
the	DT
proper	JJ
way	NN
to	TO
translate	VB
this	DT
encoding	VBG
without	IN
using	VBG
SQL	NNP
		
Server	NNP
?	.
Is	VBZ
it	PRP
possible	JJ
?	.
I'll	NNP
take	VB
VB	NNP
.	.
NET	NNP
		
code	NN
since	IN
I'm	NNP
familiar	JJ
with	IN
that	DT
too	RB
.	.
Okay	NNP
,	,
I'm	NNP
		
sure	JJ
I'm	NNP
missing	VBG
something	NN
here	RB
,	,
so	RB
here's	JJ
where	WRB
I'm	NNP
at	IN
		
.	.
Since	IN
my	PRP$
input	NN
is	VBZ
a	DT
basic	JJ
string	NN
,	,
I	PRP
started	VBD
		
with	IN
just	RB
a	DT
snippet	NN
of	IN
the	DT
encoded	JJ
portion	NN
-	:
4445434C41	CD
(	(
		
which	WDT
translates	VBZ
to	TO
DECLA	NNP
)	)
-	:
and	CC
the	DT
first	JJ
attempt	NN
was	VBD
		
to	TO
do	VB
this	DT
...	:
txtDecodedText	NN
.	.
Text	NNP
=	JJ
Encoding	NNP
.	.
UTF8	NNP
		
.	.
GetString	NNP
(	(
Encoding	NNP
.	.
UTF8	NNP
.	.
GetBytes	NNP
(	(
txtURL	NN
.	.
		
Text	NNP
)	)
)	)
;	:
...	:
and	CC
all	DT
it	PRP
did	VBD
was	VBD
return	VB
		
the	DT
exact	JJ
same	JJ
thing	NN
that	IN
I	PRP
put	VBP
in	IN
,	,
since	IN
it	PRP
		
converted	VBD
each	DT
character	NN
into	IN
is	VBZ
byte	JJ
.	.
I	PRP
realized	VBD
that	IN
I	PRP
		
need	VBP
to	TO
parse	VB
each	DT
two	CD
characters	NNS
into	IN
a	DT
byte	NN
manually	RB
since	IN
		
I	PRP
don't	VBP
know	VB
of	IN
any	DT
methods	NNS
yet	CC
that	DT
will	MD
do	VB
that	DT
		
,	,
so	RB
now	RB
my	PRP$
little	JJ
decoder	NN
looks	VBZ
something	NN
like	IN
this	DT
:	:
		
while	NN
(	(
!boolIsDone	CD
)	)
{	(
bytURLChar	JJ
=	NN
byte	NN
.	.
Parse	NNP
(	(
		
txtURLText	JJ
.	.
Text	NNP
.	.
Substring	NNP
(	(
intParseIndex	NN
,	,
2	CD
)	)
)	)
		
;	:
bytURL	CC
[intURLIndex	VB
]	NNP
=	NNP
bytURLChar	NN
;	:
intParseIndex	NN
+	VBD
=	JJ
2	CD
		
;	:
intURLIndex	NN
+	NNP
+	NNP
;	:
if	IN
(	(
txtURLText	NN
.	.
Text	NNP
.	.
		
Length	NNP
-	:
intParseIndex	NN
<	$
2	CD
)	)
{	(
boolIsDone	NN
=	NNP
true	JJ
;	:
		
}	)
}	)
txtDecodedText	JJ
.	.
Text	NNP
=	JJ
Encoding	NNP
.	.
UTF8	NNP
.	.
GetString	NNP
		
(	(
bytURL	NN
)	)
;	:
Things	NNS
look	VBP
good	JJ
for	IN
the	DT
first	JJ
couple	NN
		
of	IN
pairs	NNS
,	,
but	CC
then	RB
the	DT
loop	NN
balks	NNS
when	WRB
it	PRP
gets	VBZ
		
to	TO
the	DT
"4C	NNP
"	NNP
pair	NN
and	CC
says	VBZ
that	IN
the	DT
string	NN
is	VBZ
		
in	IN
the	DT
incorrect	JJ
format	NN
.	.
Interestingly	NNP
enough	RB
,	,
when	WRB
I	PRP
step	VBP
		
through	IN
the	DT
debugger	NN
and	CC
to	TO
the	DT
GetString	NNP
method	NN
on	IN
the	DT
byte	NN
		
array	NN
that	IN
I	PRP
was	VBD
able	JJ
to	TO
parse	VB
up	RP
to	TO
that	DT
point	NN
		
,	,
I	PRP
get	VBP
"	JJ
,	,
-	:
+	NN
"	NN
as	IN
the	DT
result	NN
		
.	.
How	WRB
do	VBP
I	PRP
figure	VB
out	RP
what	WP
I'm	NNP
missing	VBG
-	:
do	NN
		
I	PRP
need	VBP
to	TO
do	VB
a	DT
"direct	NN
cast	NN
"	NN
for	IN
each	DT
byte	NN
		
instead	RB
of	IN
attempting	VBG
to	TO
parse	VB
it	PRP
?	.
I	PRP
wound	VBD
up	RP
using	VBG
		
this	DT
.	.
It	PRP
is	VBZ
a	DT
kind	NN
of	IN
a	DT
hack	NN
,	,
but	CC
		
it	PRP
actually	RB
works	VBZ
pretty	RB
well	RB
.	.
The	DT
only	JJ
thing	NN
is	VBZ
you	PRP
		
have	VBP
to	TO
be	VB
very	RB
careful	JJ
with	IN
your	PRP$
semicolons	NNS
.	.
:	:
D	NNP
		
var	FW
strSql	NN
:String	VBG
=	JJ
stream	NN
.	.
readUTFBytes	NNS
(	(
stream	NN
.	.
bytesAvailable	JJ
		
)	)
;	:
var	NN
i	VBZ
:Number	NNP
=	NNP
0	CD
;	:
var	NN
strSqlSplit	NN
:Array	NNP
		
=	NNP
strSql	NN
.	.
split	NN
(	(
"	JJ
;	:
"	NNP
)	)
;	:
for	IN
		
(	(
i	JJ
=	VBP
0	CD
;	:
i	JJ
<	VBP
strSqlSplit	NN
.	.
length	NN
;	:
		
i	CC
+	VBP
+	NNP
)	)
{	(
NonQuery	NNP
(	(
strSqlSplit	JJ
[i	NNP
]	NNP
.	.
		
toString	NN
(	(
)	)
)	)
;	:
}	)
What	WP
is	VBZ
the	DT
"purist	JJ
"	NN
		
or	CC
"correct	JJ
"	JJ
way	NN
to	TO
access	NN
an	DT
object's	NN
properties	NNS
from	IN
within	IN
		
an	DT
object	JJ
method	NN
that	WDT
is	VBZ
not	RB
a	DT
getter	NN
/setter	NN
method	NN
?	.
		
I	PRP
know	VBP
that	IN
from	IN
outside	IN
of	IN
the	DT
object	NN
you	PRP
should	MD
use	VB
		
a	DT
getter	NN
/setter	NN
,	,
but	CC
from	IN
within	IN
would	MD
you	PRP
just	RB
do	VBP
		
:	:
Java	NN
:	:
String	NNP
property	NN
=	NN
this	DT
.	.
property	NN
;	:
PHP	NNP
		
:	:
$property	NN
=	NN
$this	NNP
-	:
>property	NN
;	:
or	CC
would	MD
you	PRP
do	VB
		
:	:
Java	VB
:	:
String	NNP
property	NN
=	NN
this	DT
.	.
getProperty	NN
(	(
)	)
		
;	:
PHP	NNP
:	:
$property	NN
=	NN
$this	NNP
-	:
>getProperty	NN
(	(
)	)
;	:
		
Forgive	CD
me	PRP
if	IN
my	PRP$
Java	NNP
is	VBZ
a	DT
little	JJ
off	RP
,	,
it's	RB
		
been	VBN
a	DT
year	NN
since	IN
I	PRP
programmed	VBD
in	IN
Java	NNP
...	:
EDIT	NN
:	:
		
It	PRP
seems	VBZ
people	NNS
are	VBP
assuming	VBG
I	PRP
am	VBP
talking	VBG
about	IN
private	JJ
or	CC
		
protected	JJ
variables	NNS
/properties	VBZ
only	RB
.	.
When	WRB
I	PRP
learned	VBD
OO	NNP
I	PRP
was	VBD
		
taught	VBN
to	TO
use	VB
getters	NNS
/setters	NNS
for	IN
every	DT
single	JJ
property	NN
even	RB
if	IN
		
it	PRP
was	VBD
public	JJ
(	(
and	CC
actually	RB
I	PRP
was	VBD
told	VBN
never	RB
to	TO
		
make	VB
any	DT
variable	JJ
/property	JJ
public	NN
)	)
.	.
So	RB
,	,
I	PRP
may	MD
		
be	VB
starting	VBG
off	RP
from	IN
a	DT
false	JJ
assumption	NN
from	IN
the	DT
get	NN
go	VBP
		
.	.
It	PRP
appears	VBZ
that	IN
people	NNS
answering	VBG
this	DT
question	NN
are	VBP
maybe	RB
saying	VBG
		
that	IN
you	PRP
should	MD
have	VB
public	JJ
properties	NNS
and	CC
that	IN
those	DT
don't	NNS
need	VBP
		
getters	NNS
and	CC
setters	NNS
,	,
which	WDT
goes	VBZ
against	IN
what	WP
I	PRP
was	VBD
taught	VBN
		
,	,
and	CC
what	WP
I	PRP
was	VBD
talking	VBG
about	RB
,	,
although	IN
maybe	RB
that	DT
		
needs	VBZ
to	TO
be	VB
discussed	VBN
as	RB
well	RB
.	.
That's	NNP
probably	RB
a	DT
good	JJ
		
topic	NN
for	IN
a	DT
different	JJ
question	NN
though	IN
...	:
This	DT
may	MD
be	VB
too	RB
		
basic	JJ
or	CC
limited	VBN
of	IN
a	DT
solution	NN
,	,
but	CC
couldn't	NN
you	PRP
do	VBP
		
a	DT
String	NNP
.	.
split	NN
(	(
)	)
on	IN
each	DT
line	NN
of	IN
the	DT
		
file	NN
,	,
remembering	VBG
the	DT
result	NN
array	NN
of	IN
the	DT
first	JJ
line	NN
to	TO
		
generate	VB
the	DT
XML	NNP
,	,
and	CC
just	RB
spit	VB
each	DT
line's	NN
array	NN
data	NNS
		
out	RP
with	IN
the	DT
proper	JJ
XML	NNP
elements	NNS
padding	VBG
each	DT
iteration	NN
of	IN
a	DT
		
loop	NN
?	.
I	PRP
have	VBP
a	DT
pretty	JJ
standard	NN
table	JJ
set-up	NN
in	IN
a	DT
		
current	JJ
application	NN
using	VBG
the	DT
.	.
NET	JJ
XSD	NN
DataSet	NNP
and	CC
TableAdapter	NNP
features	NNS
		
.	.
My	PRP$
contracts	NNS
table	JJ
consists	NNS
of	IN
some	DT
standard	JJ
contract	NN
information	NN
,	,
		
with	IN
a	DT
column	NN
for	IN
the	DT
primary	JJ
department	NN
.	.
This	DT
column	NN
is	VBZ
		
a	DT
foreign	JJ
key	NN
to	TO
my	PRP$
Departments	NNS
table	NN
,	,
where	WRB
I	PRP
store	VBP
		
the	DT
basic	JJ
department	NN
name	NN
,	,
id	NN
,	,
notes	NNS
.	.
This	DT
is	VBZ
		
all	DT
setup	NN
and	CC
functioning	NN
in	IN
my	PRP$
SQL	NNP
Server	NNP
.	.
When	WRB
I	PRP
		
use	VBP
the	DT
XSD	NNP
tool	NN
,	,
I	PRP
can	MD
drag	VB
both	DT
tables	NNS
in	IN
		
at	IN
once	RB
and	CC
it	PRP
auto	NN
detects	VBZ
/creates	VBZ
the	DT
foreign	JJ
key	NN
I	PRP
		
have	VBP
between	IN
these	DT
two	CD
tables	NNS
.	.
This	DT
works	VBZ
great	JJ
when	WRB
I'm	NNP
		
on	IN
my	PRP$
main	JJ
page	NN
and	CC
am	VBP
viewing	VBG
contract	NN
data	NNS
.	.
However	RB
		
,	,
when	WRB
I	PRP
go	VBP
to	TO
my	PRP$
administrative	JJ
page	NN
to	TO
modify	VB
the	DT
		
department	NN
data	NN
.	.
I	PRP
typically	RB
do	VBP
something	NN
like	IN
this	DT
:	:
Dim	NNP
		
dtDepartment	NN
As	IN
New	NNP
DepartmentDataTable	NNP
(	(
)	)
Dim	NNP
taDepartment	NN
As	IN
New	NNP
DepartmentTableAdapter	NNP
		
(	(
)	)
taDepartment	NN
.	.
Fill	NNP
(	(
dtDepartment	NN
)	)
However	RB
,	,
at	IN
		
this	DT
point	NN
an	DT
exception	NN
is	VBZ
thrown	JJ
saying	VBG
to	TO
the	DT
effect	NN
that	IN
		
there	EX
is	VBZ
a	DT
foreign	JJ
key	JJ
reference	NN
broken	VBN
here	RB
,	,
I'm	NNP
guessing	VBG
		
since	IN
I	PRP
don't	VBP
have	VB
the	DT
Contract	NNP
DataTable	NNP
filled	VBN
.	.
How	WRB
can	MD
		
I	PRP
fix	VB
this	DT
problem	NN
?	.
I	PRP
know	VBP
I	PRP
can	MD
simply	RB
remove	VB
		
the	DT
foreign	JJ
key	NN
from	IN
the	DT
XSD	NN
to	TO
make	VB
things	NNS
work	VB
fine	JJ
		
,	,
but	CC
having	VBG
the	DT
additional	JJ
integrity	NN
check	NN
there	RB
and	CC
having	VBG
the	DT
		
XSD	NNP
schema	NN
match	NN
the	DT
SQL	NNP
schema	NN
in	IN
the	DT
database	NN
is	VBZ
nice	JJ
		
.	.
Am	VBP
I	PRP
just	RB
going	VBG
overboard	RB
here	RB
?	.
Perhaps	RB
;	:
)	)
		
Another	DT
approach	NN
would	MD
be	VB
to	TO
utilize	VB
a	DT
private	JJ
/protected	VBN
method	NN
to	TO
		
actually	RB
do	VB
the	DT
getting	VBG
(	(
caching	VBG
/db	NNP
/etc	NNP
)	)
,	,
and	CC
		
a	DT
public	JJ
wrapper	NN
for	IN
it	PRP
that	WDT
increments	VBZ
the	DT
count	NN
:	:
PHP	NN
		
:	:
public	JJ
function	NN
getName	NN
(	(
)	)
{	(
$this	SYM
-	:
>incrementNameCalled	VBN
(	(
		
)	)
;	:
return	VB
$this	SYM
-	:
>_getName	NN
(	(
)	)
;	:
}protected	VBN
function	NN
		
_getName	NNP
(	(
)	)
{	(
return	VB
$this	SYM
-	:
>name	NN
;	:
}	)
and	CC
		
then	RB
from	IN
within	IN
the	DT
object	JJ
itself	PRP
:	:
PHP	NN
:	:
$name	NN
=	VBZ
		
$this	SYM
-	:
>_getName	NN
(	(
)	)
;	:
This	DT
way	NN
you	PRP
can	MD
still	RB
		
use	VB
that	IN
first	JJ
argument	NN
for	IN
something	NN
else	RB
(	(
like	IN
sending	VBG
a	DT
		
flag	NN
for	IN
whether	IN
or	CC
not	RB
to	TO
used	VBN
cached	VBN
data	NNS
here	RB
perhaps	RB
		
)	)
.	.
The	DT
funny	JJ
thing	NN
is	VBZ
i	JJ
wrote	VBD
a	DT
php	JJ
media	NNS
		
gallery	NN
for	IN
all	DT
my	PRP$
music	NN
2	CD
days	NNS
ago	RB
.	.
I	PRP
had	VBD
		
a	DT
similar	JJ
problem	NN
.	.
Im	NNP
using	VBG
http	NN
:	:
/	JJ
/musicplayer	NN
.	.
		
sourceforge	NN
.	.
net	JJ
/	NN
for	IN
the	DT
player	NN
.	.
and	CC
the	DT
playlis	NN
		
are	VBP
built	VBN
via	IN
php	NN
.	.
all	DT
music	NN
request	NN
go	VBP
there	RB
a	DT
		
script	NN
called	VBN
xfer	NN
.	.
php	NN
?file	IN
=WHATEVER	JJ
$filename	NN
=	NNP
base64_url_decode	NN
(	(
		
$_REQUEST	JJ
[	NN
'	''
file	NN
'	''
]	NN
)	)
;	:
header	NN
(	(
"Cache	NNP
		
-	:
Control	NN
:	:
public	JJ
"	NNP
)	)
;	:
header	NN
(	(
"Content	JJ
-	:
		
Description	NN
:	:
File	NNP
Transfer	NNP
"	NNP
)	)
;	:
header	NN
(	(
'	POS
Content-disposition	NN
		
:	:
attachment	NN
;	:
filename	JJ
=	NNP
'	POS
.	.
basename	NN
(	(
$filename	NNP
)	)
		
)	)
;	:
header	NN
(	(
"Content	JJ
-	:
Transfer-Encoding	NN
:	:
binary	JJ
"	NN
)	)
		
;	:
header	NN
(	(
'	POS
Content-Length	NN
:	:
'	POS
.	.
filesize	NN
(	(
$filename	NNP
		
)	)
)	)
;	:
/	CC
/	NNP
Put	NNP
either	CC
file	NN
counting	NN
code	NN
here	RB
		
.	.
either	CC
a	DT
db	NN
or	CC
static	JJ
files	NNS
/	VBP
/	JJ
readfile	NN
(	(
		
$filename	NN
)	)
;	:
/	CC
/and	VB
spit	VBZ
the	DT
user	NN
the	DT
file	NN
function	NN
		
base64_url_decode	NN
(	(
$input	NNP
)	)
{	(
return	NN
base64_decode	NN
(	(
strtr	NN
(	(
$input	UH
		
,	,
'	''
-	:
_	NN
,	,
'	''
,	,
'	''
+	JJ
/	NNP
=	NNP
		
'	POS
)	)
)	)
;	:
}	)
And	CC
when	WRB
you	PRP
call	VBP
files	NNS
use	VBP
		
something	NN
like	IN
function	NN
base64_url_encode	NN
(	(
$input	NNP
)	)
{	(
return	NN
strtr	NN
(	(
		
base64_encode	NN
(	(
$input	NNP
)	)
,	,
'	''
+	JJ
/	NNP
=	NNP
'	POS
,	,
		
'	''
-	:
_	NN
,	,
'	''
)	)
;	:
}	)
http	NN
:	:
/	JJ
		
/us	NN
.	.
php	NN
.	.
net	JJ
/manual	JJ
/en	NN
/function	NN
.	.
base64-encode	NN
.	.
		
php	VB
If	IN
you	PRP
are	VBP
using	VBG
some	DT
javascript	NN
or	CC
a	DT
flash	JJ
player	NN
		
(	(
JW	NNP
player	NN
for	IN
example	NN
)	)
that	WDT
requires	VBZ
the	DT
actual	JJ
link	NN
		
to	TO
be	VB
an	DT
mp3	NN
file	NN
or	CC
whatever	NN
,	,
you	PRP
can	MD
append	VB
		
the	DT
text	NN
"	NNP
&type	NNP
=	NNP
.	.
mp3	NN
"	NN
so	IN
the	DT
final	JJ
		
linke	NN
becomes	VBZ
something	NN
like	IN
"www	NNP
.	.
example	NN
.	.
com	NN
/xfer	NN
.	.
		
php	NN
?file	IN
=34842ffjfjxfh	NNP
&type	NNP
=	NNP
.	.
mp3	NN
"	NN
.	.
That	DT
way	NN
		
it	PRP
looks	VBZ
like	IN
it	PRP
ends	VBZ
with	IN
an	DT
mp3	JJ
extension	NN
without	IN
affecting	VBG
		
the	DT
file	NN
link	NN
.	.
Well	UH
,	,
what	WP
is	VBZ
the	DT
nature	NN
of	IN
		
the	DT
flat	JJ
databases	NNS
.	.
Are	VBP
they	PRP
large	JJ
or	CC
small	JJ
.	.
Is	VBZ
		
it	PRP
simple	JJ
arrays	NNS
with	IN
arrays	NNS
in	IN
them	PRP
?	.
if	IN
its	PRP$
something	NN
		
simple	JJ
say	VBP
userprofiles	NNS
built	VBN
as	IN
such	JJ
:	:
$user	NN
=	NN
array	NN
(	(
		
"name	JJ
"	NNP
=	NNP
>	NNP
"dubayou	NNP
"	NNP
,	,
"age	NN
"	NNP
=	NNP
>	NNP
		
20	CD
,	,
"websites	VBZ
"	NNP
=	NNP
>	NNP
array	NN
(	(
"dubayou	UH
.	.
com	NN
		
"	NN
,	,
"willwharton	NNP
.	.
com	NN
"	NN
,	,
"codecream	NN
.	.
com	VB
"	NN
		
)	)
,	,
"and_one	CD
"	NN
=	NNP
>	NNP
"more	NNP
"	NNP
)	)
;	:
and	CC
		
to	TO
save	VB
or	CC
update	VB
the	DT
db	NN
record	NN
for	IN
that	DT
user	NN
.	.
		
$dir	CC
=	JJ
"	NNP
..	NNP
/userdata	NNP
/	NNP
"	NNP
;	:
/	NNP
/make	VBP
sure	JJ
		
to	TO
put	VB
it	PRP
bellow	VB
what	WP
the	DT
server	NN
can	MD
reach	VB
.	.
file_put_contents	NNS
		
(	(
$dir	NN
.	.
$user	CC
[	NNP
'	POS
name	NN
'	''
]	JJ
,serialize	NNP
(	(
		
$user	NNP
)	)
)	)
;	:
and	CC
to	TO
load	VB
the	DT
record	NN
for	IN
the	DT
		
user	NN
function	NN
&get_user	NNP
(	(
$name	NN
)	)
{	(
return	NN
unserialize	NN
(	(
file_get_contents	NNS
		
(	(
"	JJ
..	NNP
/userdata	NNP
/	NNP
"	NNP
.	.
$name	NN
)	)
)	)
;	:
		
}	)
but	CC
again	RB
this	DT
implementation	NN
will	MD
vary	VB
on	IN
the	DT
application	NN
and	CC
		
nature	NN
of	IN
the	DT
database	NN
you	PRP
need	VBP
.	.
I	PRP
want	VBP
to	TO
print	VB
		
HTML	NNP
from	IN
a	DT
C	NNP
#	#
web	JJ
service	NN
.	.
The	DT
Web	NNP
Browser	NNP
		
control	NN
is	VBZ
overkill	VBN
,	,
and	CC
does	VBZ
not	RB
function	VB
well	RB
in	IN
a	DT
		
service	NN
environment	NN
,	,
nor	CC
does	VBZ
it	PRP
function	VB
well	RB
on	IN
a	DT
system	NN
		
with	IN
very	RB
tight	JJ
security	NN
constraints	NNS
.	.
Is	VBZ
there	RB
any	DT
sort	NN
of	IN
		
free	JJ
.	.
NET	JJ
library	NN
that	WDT
will	MD
support	VB
the	DT
printing	NN
of	IN
a	DT
		
basic	JJ
HTML	NNP
page	NN
?	.
Here	RB
is	VBZ
the	DT
code	NN
I	PRP
have	VBP
so	RB
		
far	RB
,	,
which	WDT
does	VBZ
not	RB
run	VB
properly	RB
.	.
public	JJ
void	NN
PrintThing	NNP
		
(	(
string	VBG
document	NN
)	)
{	(
if	IN
(	(
Thread	NNP
.	.
CurrentThread	NNP
.	.
		
GetApartmentState	NNP
(	(
)	)
!	.
=	JJ
ApartmentState	NNP
.	.
STA	NNP
)	)
{	(
Thread	JJ
		
thread	NN
=	VBD
new	JJ
Thread	NNP
((	NNP
ThreadStart	NNP
)	)
delegate	NN
{	(
PrintDocument	NNP
(	(
		
document	NN
)	)
;	:
}	)
)	)
;	:
thread	NN
.	.
SetApartmentState	NNP
(	(
ApartmentState	NNP
		
.	.
STA	NNP
)	)
;	:
thread	NN
.	.
Start	NNP
(	(
)	)
;	:
}	)
		
else	RB
{	(
PrintDocument	NNP
(	(
document	NN
)	)
;	:
}	)
}	)
protected	VBN
void	JJ
		
PrintDocument	NNP
(	(
string	VBG
document	NN
)	)
{	(
WebBrowser	NNP
browser	RB
=	VBD
new	JJ
WebBrowser	NNP
		
(	(
)	)
;	:
browser	NN
.	.
DocumentText	NNP
=	NNP
document	NN
;	:
while	IN
(	(
		
browser	NN
.	.
ReadyState	VB
!	.
=	JJ
WebBrowserReadyState	NNP
.	.
Complete	NNP
)	)
{	(
Application	NNP
		
.	.
DoEvents	NNP
(	(
)	)
;	:
}	)
browser	NN
.	.
Print	NNP
(	(
)	)
		
;	:
}	)
This	DT
works	VBZ
fine	JJ
when	WRB
called	VBN
from	IN
UI-type	NNP
threads	NNS
,	,
		
but	CC
nothing	NN
happens	NNS
when	WRB
called	VBN
from	IN
a	DT
service-type	JJ
thread	NN
.	.
Changing	VBG
		
Print	NNP
(	(
)	)
to	TO
ShowPrintPreviewDialog	NNP
(	(
)	)
yields	VBZ
the	DT
following	JJ
IE	NNP
		
script	NN
error	NN
:	:
Error	NN
:	:
'	POS
dialogArguments	NNS
.	.
___IE_PrintType	NN
'	''
is	VBZ
		
null	RB
or	CC
not	RB
an	DT
object	JJ
URL	NN
:	:
res	NNS
:	:
/	NN
/ieframe	NN
		
.	.
dll	JJ
/preview	NN
.	.
dlg	NN
And	CC
a	DT
small	JJ
empty	JJ
print	NN
preview	NN
		
dialog	NN
appears	VBZ
.	.
One	CD
of	IN
the	DT
fun	NN
parts	NNS
of	IN
multi-cultural	JJ
programming	NN
		
is	VBZ
number	NN
formats	NNS
.	.
Americans	NNPS
use	VBP
10	CD
,000	NN
.	.
50	CD
Germans	NNPS
		
use	VBP
10	CD
.	.
000	CD
,50	JJ
French	JJ
use	NN
10	CD
000	CD
,50	NN
My	NNP
		
first	JJ
approach	NN
would	MD
be	VB
to	TO
take	VB
the	DT
string	NN
,	,
parse	VB
it	PRP
		
backwards	NNS
,	,
until	IN
I	PRP
encounter	VBP
a	DT
separator	NN
and	CC
use	VB
this	DT
as	IN
		
my	PRP$
decimal	JJ
separator	NN
.	.
There	EX
is	VBZ
an	DT
obvious	JJ
flaw	NN
with	IN
that	DT
		
:	:
10	CD
.	.
000	CD
would	MD
be	VB
interpreted	VBN
as	IN
10	CD
.	.
Another	DT
		
approach	NN
:	:
if	IN
the	DT
string	NN
contains	VBZ
2	CD
different	JJ
non-numeric	JJ
characters	NNS
,	,
		
use	VBP
the	DT
last	JJ
one	NN
as	IN
the	DT
decimal	JJ
separator	NN
and	CC
discard	VB
the	DT
		
others	NNS
.	.
If	IN
I	PRP
only	RB
have	VBP
one	CD
,	,
check	NN
if	IN
it	PRP
		
occurs	VBZ
more	JJR
than	IN
once	RB
and	CC
discard	VB
it	PRP
if	IN
it	PRP
does	VBZ
.	.
		
If	IN
it	PRP
only	RB
appears	VBZ
once	RB
,	,
check	VB
if	IN
it	PRP
has	VBZ
3	CD
		
digits	NNS
after	IN
it	PRP
.	.
If	IN
yes	UH
,	,
discard	VB
it	PRP
,	,
otherwise	RB
		
use	NN
it	PRP
as	IN
decimal	JJ
separator	NN
.	.
The	DT
obvious	JJ
"best	JJS
solution	NN
"	NN
		
would	MD
be	VB
to	TO
detect	VB
the	DT
User's	NNP
culture	NN
or	CC
Browser	NNP
,	,
but	CC
		
that	IN
does	VBZ
not	RB
work	VB
if	IN
you	PRP
have	VBP
a	DT
Frenchman	NNP
using	VBG
an	DT
		
en-US	JJ
Windows	NNP
/Browser	NNP
.	.
Does	VBZ
the	DT
.	.
net	JJ
Framework	NNP
contain	NN
some	DT
		
mythical	JJ
black	JJ
magic	NN
floating	VBG
point	NN
parser	NN
that	WDT
is	VBZ
better	JJR
than	IN
Double	JJ
		
.(	JJ
Try	NNP
)Parse	NNP
(	(
)	)
in	IN
trying	VBG
to	TO
auto-detect	VB
the	DT
number	NN
		
format	NN
?	.
I've	NNP
read	VBD
somewhere	RB
the	DT
human	JJ
eye	NN
can't	NN
distinguish	JJ
between	IN
		
less	JJR
than	IN
4	CD
values	NNS
apart	RB
.	.
so	IN
This	DT
is	VBZ
something	NN
to	TO
		
keep	VB
in	IN
mind	NN
.	.
The	DT
following	JJ
algorithm	NN
does	VBZ
not	RB
compensate	VB
for	IN
		
this	DT
.	.
I'm	NNP
not	RB
sure	JJ
this	DT
is	VBZ
exactly	RB
what	WP
you	PRP
want	VBP
		
,	,
but	CC
this	DT
is	VBZ
one	CD
way	NN
to	TO
randomly	VB
generate	VB
non-repeating	JJ
color	NN
		
values	NNS
:	:
(	(
beware	NN
,	,
inconsistent	JJ
pseudo-code	JJ
ahead	RB
)	)
/	NN
/colors	NNS
		
entered	VBD
as	IN
0-255	JJ
[R	NN
,	,
G	NNP
,	,
B	NNP
]colors	NNPS
=	NNP
[	NNP
		
]	NNP
;	:
/	NNP
/holds	VBZ
final	JJ
colors	NNS
to	TO
be	VB
usedrand	JJ
=	NNP
new	JJ
		
Random	NNP
(	(
)	)
;	:
/	CC
/assumes	NNS
n	CC
is	VBZ
less	JJR
than	IN
16	CD
		
,777	JJ
,216randomGen	NNP
(	(
int	JJ
n	NN
)	)
{	(
while	IN
(	(
len	FW
(	(
		
colors	NNS
)	)
<	VBP
n	RB
)	)
{	(
/	JJ
/generate	VB
a	DT
random	JJ
number	NN
		
between	IN
0	CD
,255	NNS
for	IN
each	DT
color	NN
newRed	RB
=	NNP
rand	NN
.	.
next	JJ
		
(	(
256	CD
)	)
;	:
newGreen	JJ
=	NNP
rand	NN
.	.
next	JJ
(	(
256	CD
		
)	)
;	:
newBlue	JJ
=	NNP
rand	NN
.	.
next	JJ
(	(
256	CD
)	)
;	:
		
temp	CC
=	VB
[newRed	NNP
,	,
newGreen	JJ
,	,
newBlue	JJ
]	NN
;	:
/	CC
/only	RB
		
adds	VBZ
new	JJ
colors	NNS
to	TO
the	DT
array	NN
if	IN
temp	NN
not	RB
in	IN
colors	NNS
		
{	(
colors	NNS
.	.
append	NN
(	(
temp	NN
)	)
;	:
}	)
}	)
}	)
		
One	CD
way	NN
you	PRP
could	MD
optimize	VB
this	DT
for	IN
better	JJR
visibility	NN
would	MD
be	VB
		
to	TO
compare	VB
the	DT
distance	NN
between	IN
each	DT
new	JJ
color	NN
and	CC
all	PDT
the	DT
		
colors	NNS
in	IN
the	DT
array	NN
:	:
for	IN
item	NN
in	IN
color	NN
{	(
itemSq	JJ
		
=	NN
(	(
item	NN
[0	NNP
]	NNP
^2	NNP
+	NNP
item	NN
[1	NNP
]	NNP
^2	NNP
		
+	NNP
item	NN
[2	NNP
]	NNP
^2	NNP
]	NNP
)	)
^	VBD
(.	$
5	CD
)	)
		
;	:
tempSq	VBN
=	NNP
(	(
temp	JJ
[0	NNP
]	NNP
^2	NNP
+	NNP
temp	NN
[1	NNP
		
]	NNP
^2	NNP
+	NNP
temp	NN
[2	NNP
]	NNP
^2	NNP
]	NNP
)	)
^	VBD
(.	$
		
5	CD
)	)
;	:
dist	JJ
=	NNP
itemSq	NN
-	:
tempSq	NN
;	:
dist	JJ
=	NN
		
abs	NN
(	(
dist	NN
)	)
;	:
}	)
/	IN
/NUMBER	NN
can	MD
be	VB
your	PRP$
		
chosen	JJ
distance	NN
apart	RB
.	.
if	IN
dist	JJ
<	NNP
NUMBER	NNP
and	CC
temp	MD
not	RB
		
in	IN
colors	NNS
{	(
colors	NNS
.	.
append	NN
(	(
temp	NN
)	)
;	:
}	)
		
But	CC
this	DT
approach	NN
would	MD
significantly	RB
slow	VB
down	RP
your	PRP$
algorithm	NN
.	.
Another	DT
		
way	NN
would	MD
be	VB
to	TO
scrap	VB
the	DT
randomness	NN
and	CC
systematically	RB
go	VBP
through	IN
		
every	DT
4	CD
values	NNS
and	CC
add	VB
a	DT
color	NN
to	TO
an	DT
array	NN
in	IN
		
the	DT
above	JJ
example	NN
.	.
I	PRP
don't	VBP
know	VB
the	DT
ASP	NNP
.	.
NET	NNP
		
side	NN
of	IN
the	DT
problem	NN
but	CC
.	.
NET	NNP
has	VBZ
a	DT
pretty	RB
powerful	JJ
		
class	NN
:	:
System	NN
.	.
Globalization	NNP
.	.
CultureInfo	NNP
.	.
You	PRP
can	MD
use	VB
		
the	DT
following	JJ
code	NN
to	TO
parse	VB
a	DT
string	NN
containing	VBG
a	DT
double	JJ
value	NN
		
:	:
double	JJ
d	NN
=	NNP
double	RB
.	.
Parse	NNP
(	(
"100	NNP
.	.
20	CD
		
"	NN
,	,
CultureInfo	NNP
.	.
CurrentCulture	NN
)	)
;	:
/	CC
/	CD
--	:
OR	NNP
		
--	:
double	JJ
d	NN
=	NNP
double	RB
.	.
Parse	NNP
(	(
"100	NNP
.	.
20	CD
		
"	NN
,	,
CultureInfo	NNP
.	.
CurrentUICulture	NN
)	)
;	:
If	IN
ASP	NNP
.	.
NET	NNP
		
somehow	NN
(	(
i	JJ
.	.
e	NN
.	.
using	VBG
HTTP	NNP
Request	NNP
headers	NNS
)	)
		
passes	VBZ
current	JJ
user's	JJ
CultureInfo	NNP
to	TO
either	DT
CultureInfo	NNP
.	.
CurrentCulture	NN
or	CC
CultureInfo	NNP
		
.	.
CurrentUICulture	NN
,	,
these	DT
will	MD
work	VB
fine	NN
.	.
